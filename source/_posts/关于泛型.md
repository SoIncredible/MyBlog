---
title: å…³äºæ³›å‹
tags:
  - C#
categories: å­¦ä¹ ç¬”è®°
cover: 'http://soincredible777.com.cn:90/27.png'
abbrlink: f7eb93de
date: 2023-03-28 18:47:23
description:
swiper_index:
sticky:
---

æ³›å‹å…è®¸æˆ‘ä»¬å»¶è¿Ÿç¼–å†™ç±»æˆ–æ–¹æ³•ä¸­çš„ç¼–ç¨‹å…ƒç´ çš„æ•°æ®ç±»å‹çš„è§„èŒƒï¼Œç›´åˆ°å®é™…åœ¨ç¨‹åºä¸­ä½¿ç”¨å®ƒçš„æ—¶å€™ã€‚æ¢å¥è¯è¯´ï¼Œæ³›å‹å…è®¸æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªå¯ä»¥ä¸ä»»ä½•æ•°æ®ç±»å‹ä¸€èµ·å·¥ä½œçš„ç±»æˆ–æ–¹æ³•ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡æ•°æ®ç±»å‹çš„æ›¿ä»£å‚æ•°ç¼–å†™ç±»æˆ–æ–¹æ³•çš„è§„èŒƒã€‚å½“ç¼–è¯‘å™¨é‡åˆ°ç±»çš„æ„é€ å‡½æ•°æˆ–è€…æ–¹æ³•çš„å‡½æ•°è°ƒç”¨æ—¶ï¼Œå®ƒä¼šç”Ÿæˆä»£ç æ¥å¤„ç†åˆ¶å®šçš„æ•°æ®ç±»å‹ã€‚çœ‹ä¸‹é¢çš„ä»£ç 

å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼š

```C#
namespace MyGeneric
{
    public class CommonMethod
    {
        public static void ShowInt(int iParameter)
        {
            Console.WriteLine("This is {0}, parameter = {1}, type = {2}", typeof(CommonMethod).Name,
                iParameter.GetType().Name, iParameter);
        }


        public static void ShowStirng(string sParameter)
        {
            Console.WriteLine("This is {0}, parameter = {1}, type = {2}", typeof(CommonMethod).Name,
                sParameter.GetType().Name, sParameter);
        }

        public static void showDataTime(DateTime dtParameter)
        {
            Console.WriteLine("This is {0}, parameter = {1}, type = {2}", typeof(CommonMethod).Name,
                dtParameter.GetType().Name, dtParameter);
        }

        public static void ShowObject(Object objParameter)
        {
            Console.WriteLine("This is {0}, parameter = {1}, type = {2}", typeof(CommonMethod).Name,
                objParameter.GetType().Name, objParameter);
        }

        public static void Main(string[] args)
        {
            int iParameter = 123;
            string sParameter = "456";
            DateTime dtParameter = DateTime.Now;

            ShowInt(iParameter);
            ShowStirng(sParameter);
            showDataTime(dtParameter);
            ShowObject(iParameter);
            ShowObject(sParameter);
            ShowObject(dtParameter);
        }
    }
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œå‡ºäº†ä¼ å…¥çš„å‚æ•°ä¸åŒï¼Œå…¶é‡Œé¢å®ç°çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœæˆ‘ä»¬ä¸è€ƒè™‘ä½¿ç”¨æ³›å‹çš„è¯ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥ä½¿ç”¨ObejctåŸºç±»æ¥å®ç°è¿™ä¸ªåŠŸèƒ½çš„ï¼Œè™½ç„¶å®ƒèƒ½è§£å†³ä»£ç å¤ç”¨çš„é—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨objectç±»ä¼šå¯¼è‡´è£…ç®±æ‹†ç®±çš„é—®é¢˜ï¼ŒæŸè€—ç¨‹åºçš„æ€§èƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥çœ‹çœ‹æ³›å‹æ˜¯æ€ä¹ˆå†™çš„ï¼š

```C#
namespace MyGeneric
{
    public class CommonMethod
    {
        public static void ShowItem<T>(T tParameter)
        {
            Console.WriteLine("This is {0}, type = {1}, parameter = {2}", typeof(CommonMethod).Name,
                tParameter.GetType().Name, tParameter);
        }

        public static void Main(string[] args)
        {
            int iParameter = 123;
            string sParameter = "456";
            DateTime dtParameter = DateTime.Now;

            ShowItem<int>(iParameter);
            ShowItem<string>(sParameter);
            ShowItem<DateTime>(dtParameter);
        }
    }
}
```

# æ³›å‹ï¼ˆGenericï¼‰çš„ç‰¹æ€§

æ³›å‹æ˜¯ä¸€ç§å¢å¼ºç¨‹åºåŠŸèƒ½çš„æŠ€æœ¯ï¼Œå…·ä½“è¡¨ç°åœ¨ï¼š

- å®ƒæœ‰åŠ©äºæˆ‘ä»¬æœ€å¤§é™åº¦åœ°é‡ç”¨æˆ‘ä»¬çš„ä»£ç ã€ä¿æŠ¤ç±»å‹çš„å®‰å…¨ä»¥åŠæé«˜æ€§èƒ½ã€‚
- æˆ‘ä»¬å¯ä»¥åˆ›å»ºæ³›å‹é›†åˆç±»ã€‚.Netæ¡†æ¶ç±»åº“åœ¨System.Collections.Genericå‘½åç©ºé—´ä¸­åŒ…å«äº†ä¸€äº›æ–°çš„æ³›å‹é›†åˆç±»ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›æ³›å‹é›†åˆç±»æ¥æ›¿ä»£System.collectionsä¸­çš„é›†åˆç±»
- æˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„æ³›å‹æ¥å£ã€æ³›å‹ç±»ã€æ³›å‹æ–¹æ³•ã€æ³›å‹äº‹ä»¶å’Œæ³›å‹å§”æ‰˜
- æˆ‘ä»¬å¯ä»¥å¯¹æ³›å‹ç±»è¿›è¡Œçº¦æŸä»¥è®¿é—®ç‰¹å®šæ•°æ®ç±»å‹çš„æ–¹æ³•
- å…³äºæ³›å‹æ•°æ®ç±»å‹ä¸­ä½¿ç”¨çš„ç±»å‹çš„ä¿¡æ¯å¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡ä½¿ç”¨åå°„è·å–

# ä¸ºä»€ä¹ˆéœ€è¦æ³›å‹ç±»ï¼Ÿ

çœ‹ä¸€ä¸‹ä¸‹é¢çš„ä»£ç ï¼š

```C#
using System;
using System.Collections.Generic;

namespace GenericApplication
{
    public class MyGenericArray<T>
    {
        private T[] array;
        public MyGenericArray(int size)
        {
            array = new T[size + 1];
        }
        public T getItem(int index)
        {
            return array[index];
        }
        public void setItem(int index, T value)
        {
            array[index] = value;
        }
    }
           
    class Tester
    {
        static void Main(string[] args)
        {
            // å£°æ˜ä¸€ä¸ªæ•´å‹æ•°ç»„
            MyGenericArray<int> intArray = new MyGenericArray<int>(5);
            // è®¾ç½®å€¼
            for (int c = 0; c < 5; c++)
            {
                intArray.setItem(c, c*5);
            }
            // è·å–å€¼
            for (int c = 0; c < 5; c++)
            {
                Console.Write(intArray.getItem(c) + " ");
            }
            Console.WriteLine();
            // å£°æ˜ä¸€ä¸ªå­—ç¬¦æ•°ç»„
            MyGenericArray<char> charArray = new MyGenericArray<char>(5);
            // è®¾ç½®å€¼
            for (int c = 0; c < 5; c++)
            {
                charArray.setItem(c, (char)(c+97));
            }
            // è·å–å€¼
            for (int c = 0; c < 5; c++)
            {
                Console.Write(charArray.getItem(c) + " ");
            }
            Console.WriteLine();
            Console.ReadKey();
        }
    }
}
```

è¿™ä¸ªä»£ç å°±ç»™å‡ºäº†ä¸€ä¸ªæ³›å‹ç±»ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªç±»ä¸­æœ‰ç§æœ‰æ•°æ®æˆå‘˜arrayï¼Œå¹¶ä¸”è¿™ä¸ªç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•æˆå‘˜éƒ½æ˜¯æ ¹æ®è¿™ä¸ªæ•°æ®æˆå‘˜çš„ç±»å‹å˜åŒ–è€Œéœ€è¦å˜åŒ–çš„ï¼Œå› æ­¤æˆ‘ä»¬å°±å°†æ•´ä¸ªç±»éƒ½è®¾ç½®æˆäº†æ³›å‹ã€‚å¦‚æœç±»ä¸­çš„æ–¹æ³•éœ€è¦è¿”å›arrayå¯¹åº”çš„ç±»å‹ï¼Œé‚£ä½¿ç”¨æ³›å‹ç±»å°±å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

# C#ä¸­outå’Œrefä¹‹é—´çš„åŒºåˆ«

é¦–å…ˆä¸¤è€…éƒ½æ˜¯æŒ‰åœ°å€ä¼ é€’çš„ï¼Œä½¿ç”¨åéƒ½å°†æ”¹å˜åŸæ¥å‚æ•°çš„æ•°å€¼ã€‚

å…¶æ¬¡ï¼Œrefå¯ä»¥æŠŠå‚æ•°çš„æ•°å€¼ä¼ é€’è¿›å‡½æ•°ï¼Œä½†æ˜¯outæ˜¯è¦æŠŠå‚æ•°æ¸…ç©ºï¼Œæˆ‘ä»¬æ— æ³•æŠŠä¸€ä¸ªæ•°å€¼ä»outä¼ é€’è¿›å»ï¼Œoutè¿›å»åï¼Œå‚æ•°çš„æ•°å€¼ä¸ºç©ºï¼Œæˆ‘ä»¬å¿…é¡»åˆå§‹åŒ–ä¸€æ¬¡ã€‚

# æ³›å‹å§”æ‰˜

```C#
delegate T NumberCHanger<T>(T n);
```

```C#
using System;
using System.Collections.Generic;
using System.Diagnostics;

delegate T NumberChanger<T>(T n);

namespace GenericdelegateAppl
{
    class TestDelegate
    {
        private static int num = 10;

        public static int AddNum(int p)
        {
            num += p;
            return num;
        }

        public static int MultNum(int q)
        {
            num *= q;
            return num;
        }

        public static int getNum()
        {
            return num;
        }

        static void Main(string[] args)
        {
            NumberChanger<int> nc1 = new NumberChanger<int>(AddNum);
            NumberChanger<int> nc2 = new NumberChanger<int>(MultNum);
            nc1(25);
            Console.WriteLine("value of Num: {0}", getNum());
            nc2(5);
            Console.WriteLine("Value of Num: {0}", getNum());
            Console.ReadKey();
        }
    }
}
```

æ³›å‹å§”æ‰˜å¯ä»¥è§£å†³è¿”å›å€¼ç±»å‹ä¸åŒã€å‚æ•°ç±»å‹ä¸åŒçš„ä¸€ç±»æ–¹æ³•çš„ä»£ç å¤ç”¨é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºå‚æ•°æ•°é‡é—®é¢˜è¿˜æ˜¯æ²¡æœ‰åŠæ³•è§£å†³ã€‚

è€Œä¸”å¦‚æœæˆ‘ä»¬å†™æˆè¿™æ ·ï¼š

```C#
delegate T NumberCHanger<T>(T n);
```

å°±ä»£è¡¨æˆ‘ä»¬å§”æ‰˜çš„è¿”å›ç±»å‹å’Œå‚æ•°ç±»å‹è¦ä¸€æ ·ï¼Œå¦‚æœå†™æˆè¿™æ ·ï¼š

```C#
delegate void NumberCHanger<T>(T n);
```

æˆ‘ä»¬çš„Tä¹Ÿå°±åªæ§åˆ¶å‚æ•°ç±»å‹è€Œä¸ä¼šæ§åˆ¶è¿”å›ç±»å‹äº†ã€‚

ä»Šå¤©çœŸçš„å¥½å¿™å¥½å¿™å¥½å¿™ï¼Œå®‡å“¥å’Œæµ©å¤©ä¸€ç›´åœ¨ä¿®æ’è¡Œæ¦œçš„Bugï¼Œè€Œæˆ‘è´Ÿè´£çš„ç‹¬è§’å…½ä¹Ÿä¸€ç›´æœ‰æ–°çš„Bugè¢«æµ‹å‡ºæ¥ï¼Œä¾¯å¤§å¸ˆè¿˜è¯·å‡äº†ï¼Œå¥½éš¾é¡¶å–”ğŸ˜­
