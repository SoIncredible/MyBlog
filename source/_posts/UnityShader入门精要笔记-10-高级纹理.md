---
title: UnityShader入门精要笔记_10_高级纹理
date: 2024-07-15 12:35:28
tags:
categories:
cover:
description:
swiper_index:
sticky:
---


# 立方体纹理

在图形学中，立方体纹理(Cubemap)是**环境映射(Environment Mapping)**的一种实现方法。环境映射可以模拟物体周围的环境，而使用了环境映射的物体可以看起来像是镀了一层金属一样反射处周围的环境。

和之前见到的纹理不同，立方体纹理总共包含六张图片，这些图像对应了一个立方体的六个面，立方体纹理的名称也由此而来。立方体的每个面表示沿着世界空间下的轴向（上、下、左、右、前、后）观察所得的图像。那么我们如何对这样的一种纹理进行采样呢？和之前使用的二维纹理坐标不同，对立方体纹理采样我们需要提供一个三维的纹理坐标，这个三维纹理坐标表示了我们在世界空间下的一个3D方向。这个方向矢量从立方体的中心出发，当它向外部延伸时就会和立方体的6个纹理之一发生相交，而采样得到的结果就是由该交点计算而来的。

使用立方体纹理的好处在于，它的实现简单快速，而且得到的效果也是比较好的。但是它也有一些缺点，例如，当场景中引入了新的物体、光源，或者物体发生移动时，我们就需要重新生成立方体纹理。除此之外，立方体纹理也仅可以反射环境，但不能反射使用了该立方体纹理的物体本身。这是因为，立方体纹理不能模拟多次反射的结果，例如两个金属球互相反射的情况，不过Unity中引入的全局光照系统允许我们实现这样的自反射效果。由于这样的原因，想要得到令人信服的渲染结果，我们应该尽量对凸面体而不要对凹面体使用立方体纹理，因为凹面体会反射自身。

立方体纹理在实时渲染中有很多应用，最常见的是用于天空盒子以及环境映射。

## 天空盒子



需要说明的是，在

在Unity中，天空盒子是在所有不透明物体之后渲染的，而其被后使用的网格是一个立方体或一个细分后的球体。

## 创建用于环境映射的立方体纹理

除了天空盒子，立方体纹理最常见的用处就是用于环境映射。通过这种方法，我们可以模拟出具有金属质感的材质。

在Unity中创建用于环境映射的立方体纹理的方法有三种：第一种方法是直接由一些特殊布局的纹理创建；第二种方法是手动创建一个Cubmap资源，再把6张图赋给它；第三种方法是由脚本生成。

## 反射

使用了反射效果的物体通常看起来就像是镀了一层金属。想要模拟反射效果十分简单，我们只需要通过入射光线的方向和表面法线方向来计算反射方向，再利用反射方向对立方体纹理进行采样即可。

物体反射到摄像机中的光线方向，可以由光路可逆的原则来反向求得。也就是说，我们可以计算视角方向关于顶点法线的反射方向来求得入射光线的方向。


## 折射

# 渲染纹理

## 镜子效果

## 玻璃效果

## 渲染纹理 vs. GrabPass

# 程序纹理

## 在Unity中实现简单的程序纹理

## Unity的程序材质